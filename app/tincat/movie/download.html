<!DOCTYPE html>
<html lang="en">
<head>
	<title>Tincat Movie Download</title>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0"/>
	<link rel="Shortcut Icon" href="drawable/icon.png" type="image/png"/>
	<link href="../common/h5.css" rel="stylesheet"/>

	<script src="libs/context.js"></script>
	<script src="../common/h5.js"></script>
	<script src="../common/tincat.js"></script>
	<script src="../common/vue.min.js"></script>
</head>

<body>
<div id="app">
	<div style="text-align: center;font-weight: bold;color: #e53935;font-size: 20px;padding: 32px 16px 16px 16px;">Download Movie</div>
	<div style="display: flex; justify-content: center;">
		<div style="display: flex;justify-content: center;align-items: center;height: 44px;width: 85%; border-radius: 4px;border: solid 2px #e53935;">
			<input v-model="code" type="text" style="height: 100%;border: none;flex-grow: 1;padding: 0px 4px 0px 4px;" placeholder="copy movie code from Tincat Movie App"/>
			<button @click="download()" class="h5-button-red" style="height: 100%;width: 50px;color: #ffffff;">GO</button>
		</div>
	</div>
</div>
</body>

<script>
	new Vue({
		el: "#app",

		data ()
		{
			return {
				code: "",
				movie: {}
			};
		},

		methods: {
			download ()
			{
				if(!this.code)
				{
					tincat.system.toast("code is null");
					return;
				}
				tincat.http.restful({
					method: "GET",
					url: Api.tincat_movie_download + "/" + this.code,
					mask: true,
					callback: data => tincat.system.download(data.url, data.filename)
				});
			}
		}
	});
</script>
</html>