<!DOCTYPE html>
<html lang="en">
<head>
	<title>Tincat Movie</title>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1, maximum-scale=1, user-scalable=0"/>
	<link rel="Shortcut Icon" href="drawable/icon.png" type="image/png"/>
	<link href="../common/h5.css" rel="stylesheet"/>
	<style>
        .app-banner {
            background-color: #f6f6f6;
            position: relative;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .app-poster {
            position: absolute;
            left: 0px;
            top: 0px;
            right: 0px;
            bottom: 0px;
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
	</style>

	<script src="libs/context.js"></script>
	<script src="../common/h5.js"></script>
	<script src="../common/tincat.js"></script>
	<script src="../common/vue.min.js"></script>
</head>

<body>
<div id="app">
	<div class="app-banner" :style="bannerStyle">
		<img class="app-poster" referrerpolicy="no-referrer" :src="movie.posterUrl" style="width: 100%; height: 100%;"/>
		<div style="z-index: 1;display: flex; align-items: center;justify-content: center;">
			<button @click="openTrailer()" class="h5-button-round h5-button-red">Trailer</button>
		</div>
	</div>

	<div style="margin-top: -40px;display: flex;padding-left: 16px;">
		<img referrerpolicy="no-referrer" :src="movie.posterUrl" style="width: 80px; height: 120px;border-radius: 4px;box-shadow: 0px 0px 10px #dddddd;  z-index: 1;background-color: #ffffff;"/>
		<div style="flex-grow: 1;z-index: 1;padding-left: 8px;">
			<div class="h5-singleline" style="color: #ffffff; font-weight: bold;height: 40px;display: flex;align-items: center;font-size: 18px;">{{movie.title}}</div>
			<div style="margin-top: 6px;">{{movie.country}} {{movie.year}}</div>
			<div style="margin-top: 6px;color: #9a9a9a;">{{movie.minutes}}</div>
			<div style="margin-top: 6px;color: #9a9a9a;">Rating {{movie.rating}}</div>
		</div>
	</div>

	<div style="padding: 16px;">
		<div style="display: flex; align-items: center;padding: 8px;background-color: #f6f6f6;border-radius: 8px;">
			<img src="drawable/icon.png" style="width: 50px; height: 50px;">
			<div style="padding-left: 8px;">
				<div style="font-weight: bold;">Watch Online in Tincat Movie App</div>
				<div style="color: #9a9a9a;margin-top: 4px;font-size: 14px;">search "Tincat Movie" on Play Store</div>
			</div>
		</div>
	</div>

	<div style="padding: 8px 16px 8px 16px;font-size: 16px;font-weight: bold;">{{movie.title}}</div>
	<div style="padding: 8px 16px 8px 16px;color: #9a9a9a;">{{movie.releaseDate}}</div>
	<div style="padding: 0px 16px 0px 16px;line-height: 1.4;color: #9a9a9a;">{{movie.description}}</div>
</div>
</body>

<script>
	new Vue({
		el: "#app",

		data ()
		{
			let height = screen.width * 9 / 16;
			return {
				bannerStyle: "width:100%;height:" + height + "px",
				movie: {}
			};
		},

		mounted ()
		{
			tincat.http.restful({
				method: "GET",
				url: Api.tincat_movie + "/" + h5.util.getParameter("id"),
				mask: true,
				cache: true,
				callback: data => this.movie = data.movie
			});
		},

		methods: {
			openTrailer ()
			{
				location.href = "https://www.youtube.com/results?search_query=" + encodeURIComponent(this.movie.title + " trailer");
			}
		}
	});
</script>
</html>