(function(){"use strict";var e={5634:function(e,t,n){var o=n(5130),i=n(1387),r=n(6768),s=n(4232),l=n.p+"img/icon_bookmark.6c7f47e1.svg",a=n.p+"img/icon_bookmark_folder.3013be7a.svg";const p={style:{"margin-top":"8px"}},c=["onClick"],d={key:0,src:l,style:{width:"16px",height:"16px"}},u={key:1,src:a,style:{width:"16px",height:"16px"}},h={style:{"padding-left":"8px"}};function f(e,t,n,o,i,l){const a=(0,r.g2)("Activity");return(0,r.uX)(),(0,r.Wv)(a,null,{default:(0,r.k6)(()=>[t[0]||(t[0]=(0,r.Lk)("div",{style:{"font-size":"20px","font-weight":"bold",padding:"16px 16px 0px 16px"}},"Bookmark",-1)),(0,r.Lk)("div",p,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.bookmarkArray,e=>((0,r.uX)(),(0,r.CE)("div",{onClick:t=>l.openBookmark(e),style:{display:"flex","align-items":"center",height:"40px",padding:"0px 16px"},class:"h5-selector"},[(0,r.Lk)("div",null,[e.url?((0,r.uX)(),(0,r.CE)("img",d)):(0,r.Q3)("",!0),e.url?(0,r.Q3)("",!0):((0,r.uX)(),(0,r.CE)("img",u))]),(0,r.Lk)("div",h,(0,s.v_)(e.title),1)],8,c))),256))])]),_:1,__:[0]})}n(4114);var g={name:"bookmark",data(){return{bookmarkArray:[]}},mounted(){this.getData()},methods:{getData(){plus.storage.get("bookmarkArray",null,e=>{e&&(this.bookmarkArray=e),plus.http.post({url:Api.tincat_bookmark_snapshot,cfg:{mask:!1,cache:!0},callback:e=>{this.bookmarkArray=JSON.parse(e.snapshot),plus.storage.set("bookmarkArray",this.bookmarkArray)}})})},openBookmark(e){if(e.url)window.open(e.url);else{for(var t=[],n=0;n<e.bookmarkArray.length;n++)t.push(e.bookmarkArray[n].title);plus.list(e.title,t,t=>{window.open(e.bookmarkArray[t].url)})}}}},k=n(1241);const v=(0,k.A)(g,[["render",f]]);var m=v,y=n.p+"img/image_cast.cf1b1d1b.png",x=n.p+"img/image_bookmark.7da93bb9.png",b=n.p+"img/image_live.2a908fb7.png";const w={style:{display:"flex","flex-wrap":"wrap",padding:"8px"}};function L(e,t,n,o,i,s){const l=(0,r.g2)("Activity");return(0,r.uX)(),(0,r.Wv)(l,{background:"#f6f6f6"},{default:(0,r.k6)(()=>[t[6]||(t[6]=(0,r.Lk)("div",{style:{"font-size":"20px","font-weight":"bold",padding:"16px 16px 0px 16px"}},"Home Feature",-1)),(0,r.Lk)("div",w,[(0,r.Lk)("div",{onClick:t[0]||(t[0]=e=>s.open("/msg")),class:"app-home-card"},t[3]||(t[3]=[(0,r.Lk)("div",null,[(0,r.Lk)("img",{src:y})],-1),(0,r.Lk)("div",null,"Receive Cast",-1),(0,r.Lk)("div",null,"Keep tincat client opened to receive page, video, text cast from all your devices.",-1)])),(0,r.Lk)("div",{onClick:t[1]||(t[1]=e=>s.open("/bookmark")),class:"app-home-card"},t[4]||(t[4]=[(0,r.Lk)("div",null,[(0,r.Lk)("img",{src:x})],-1),(0,r.Lk)("div",null,"Sync Bookmark",-1),(0,r.Lk)("div",null,"Synchronize your tincat application bookmarks and quickly share them on your phone and computer.",-1)])),(0,r.Lk)("div",{onClick:t[2]||(t[2]=e=>s.open("/live")),class:"app-home-card",style:{display:"none"}},t[5]||(t[5]=[(0,r.Lk)("div",null,[(0,r.Lk)("img",{src:b})],-1),(0,r.Lk)("div",null,"Tincat TV",-1),(0,r.Lk)("div",null,"Watch your tincat tv channels on computer and relax your life.",-1)]))])]),_:1,__:[6]})}var A={name:"home",data(){return{}},mounted(){},methods:{open(e){plus.browser.open(e)}}};const C=(0,k.A)(A,[["render",L]]);var _=C;const T={style:{display:"flex","flex-direction":"column",position:"absolute",left:"250px",top:"0px",right:"300px",bottom:"0px"}},O={style:{padding:"16px","flex-grow":"1"}},S={ref:"playerWrapper",style:{"background-color":"#444444",height:"100%"}},X={style:{"text-align":"center",padding:"32px 0px 48px 0px"}},E={ref:"filechooser",type:"file",accept:"audio/x-mpegurl",style:{display:"none"}},I={style:{position:"absolute",top:"0px",right:"0px",bottom:"0px","overflow-y":"auto",width:"300px","border-left":"solid 1px #dddddd",display:"flex","flex-direction":"column"}},P={style:{padding:"0px 8px 8px 8px"}},U={style:{"flex-grow":"1","overflow-y":"auto"}},M=["onClick"];function V(e,t,n,i,l,a){const p=(0,r.g2)("Activity");return(0,r.uX)(),(0,r.Wv)(p,null,{default:(0,r.k6)(()=>[(0,r.Lk)("div",T,[t[3]||(t[3]=(0,r.Lk)("div",{style:{"font-size":"20px","font-weight":"bold",padding:"16px 0px 0px 16px"}},"Tincat TV",-1)),t[4]||(t[4]=(0,r.Lk)("div",{style:{padding:"16px 16px 0px 16px"}},"Due to chrome http cross-domain security issues, m3u8 may not play properly. It is strongly recommended that get Tincat TV App.",-1)),t[5]||(t[5]=(0,r.Lk)("div",{style:{padding:"16px 16px 0px 16px"}},'Search "TincatTV" on Google Play Store to get Tincat TV App.',-1)),(0,r.Lk)("div",O,[(0,r.Lk)("div",S,null,512)]),(0,r.Lk)("div",X,[(0,r.Lk)("button",{onClick:t[0]||(t[0]=e=>a.addLocalM3U()),class:"h5-button h5-button-white",style:{width:"150px",margin:"0px 8px 0px 8px"}},"Add Local M3U"),(0,r.Lk)("button",{onClick:t[1]||(t[1]=e=>a.clearChannelList()),class:"h5-button h5-button-white",style:{width:"150px",margin:"0px 8px 0px 8px"}},"Clear Channel List")]),(0,r.Lk)("input",E,null,512)]),(0,r.Lk)("div",I,[t[6]||(t[6]=(0,r.Lk)("div",{style:{"font-weight":"bold","text-align":"center",padding:"12px 16px 12px 16px"}},"Channel List",-1)),(0,r.Lk)("div",P,[(0,r.bo)((0,r.Lk)("input",{"onUpdate:modelValue":t[2]||(t[2]=e=>l.keyword=e),type:"text",style:{height:"32px","background-color":"#f6f6f6","border-radius":"40px",width:"100%",padding:"0px 16px 0px 16px"},placeholder:"search channel"},null,512),[[o.Jo,l.keyword]])]),(0,r.Lk)("div",U,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.filterArray,e=>((0,r.uX)(),(0,r.CE)("div",null,[(0,r.Lk)("div",{onClick:t=>a.playVideo(e.url),class:"h5-singleline h5-selector",style:{padding:"10px 16px 10px 16px","font-size":"13px"}},(0,s.v_)(e.name),9,M)]))),256))])])]),_:1})}n(8111),n(2489);var W={name:"live",data(){return{keyword:"",channelArray:[],filterArray:[]}},mounted(){plus.storage.get("TVChannelList",null,e=>{e&&(this.channelArray=JSON.parse(e),this.filter())})},methods:{addLocalM3U(){this.$refs.filechooser.removeEventListener("change",this.filechooserListener),this.filechooserListener=e=>{var t=e.target.files[0];if(t){this.$refs.filechooser.value="";var n=new FileReader;n.onload=()=>{for(var e=this.parseM3U(n.result),t=0;t<e.length;t++)this.channelArray.push(e[t]);plus.storage.set("TVChannelList",JSON.stringify(this.channelArray)),this.filter()},n.readAsText(t,"UTF-8")}},this.$refs.filechooser.addEventListener("change",this.filechooserListener),this.$refs.filechooser.click()},parseM3U(e){try{for(var t=e.split("\n"),n=[],o={},i=0;i<t.length;i++){var r=t[i];0!==r.length&&(0===r.indexOf("#EXTINF")?o.name=r.split(",")[1]:(o.url=r,o.name&&o.url&&n.push(o),o={}))}return n}catch(s){plus.toast("error m3u")}},filter(){if(this.keyword){for(var e=[],t=0;t<this.channelArray.length;t++){var n=this.channelArray[t];n.name.toLowerCase().indexOf(this.keyword.toLowerCase())>-1&&e.push(n)}this.filterArray=e}else this.filterArray=this.channelArray},playVideo(e){if(console.log("播放:"+e),document.querySelector("#player")){var t=videojs("player");t.dispose()}$(this.$refs.playerWrapper).append('<video id="player" class="video-js vjs-default-skin" controls style="width: 100%;height:100%;"/>');t=videojs("player",{},()=>{t.on("error",e=>{plus.toast("play failed")})});t.src({src:e.replace("\r","")}),t.play()},clearChannelList(){confirm("Delete all tv channels?")&&(plus.storage.set("TVChannelList",""),this.channelArray=[],this.filter())}},watch:{keyword(){this.filter()}}};const j=(0,k.A)(W,[["render",V]]);var N=j,D=n.p+"img/icon_refresh.0ba8fa46.svg",z=n.p+"img/icon_system_android.ed197b19.svg",F=n.p+"img/icon_system_ios.47353380.svg",R=n.p+"img/icon_system_web.27675582.svg",J=n.p+"img/icon_system_tv.2bc988f3.svg";const Q={style:{padding:"16px"}},q={style:{"background-color":"#ffffff","border-radius":"24px",padding:"16px"}},H={style:{padding:"16px 0px 0px 16px",display:"flex","align-items":"center"}},B={style:{"background-color":"#ffffff","border-radius":"24px",padding:"12px"}},K={style:{display:"flex","align-items":"center",padding:"4px"}},G={key:0,src:z,style:{width:"18px",height:"18px"}},Y={key:1,src:F,style:{width:"18px",height:"18px"}},Z={key:2,src:R,style:{width:"18px",height:"18px"}},ee={key:3,src:J,style:{width:"18px",height:"18px"}},te={style:{"padding-right":"12px","flex-grow":"1","padding-left":"12px"}},ne=["onClick"];function oe(e,t,n,i,l,a){const p=(0,r.g2)("Activity");return(0,r.uX)(),(0,r.Wv)(p,{background:"#f6f6f6"},{default:(0,r.k6)(()=>[t[3]||(t[3]=(0,r.Lk)("div",{style:{"font-size":"20px","font-weight":"bold",padding:"16px 16px 0px 16px"}},"Push Message",-1)),(0,r.Lk)("div",Q,[(0,r.Lk)("div",q,[(0,r.Lk)("div",null,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.content=e),style:{border:"none",width:"100%",height:"150px"},placeholder:"text data to device"},null,512),[[o.Jo,l.content]])])]),(0,r.Lk)("div",H,[t[2]||(t[2]=(0,r.Lk)("div",{style:{"font-weight":"bold","flex-grow":"1"}},"My Online Devices",-1)),(0,r.Lk)("div",null,[(0,r.Lk)("img",{onClick:t[1]||(t[1]=e=>a.refreshDevices(!0)),src:D,style:{width:"40px",height:"40px",padding:"10px",cursor:"pointer"}})])]),(0,r.Lk)("div",B,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.clientArray,e=>((0,r.uX)(),(0,r.CE)("div",K,[(0,r.Lk)("div",null,["android"===e.systemType?((0,r.uX)(),(0,r.CE)("img",G)):(0,r.Q3)("",!0),"ios"===e.systemType?((0,r.uX)(),(0,r.CE)("img",Y)):(0,r.Q3)("",!0),"web"===e.systemType?((0,r.uX)(),(0,r.CE)("img",Z)):(0,r.Q3)("",!0),"tv"===e.systemType?((0,r.uX)(),(0,r.CE)("img",ee)):(0,r.Q3)("",!0)]),(0,r.Lk)("div",te,(0,s.v_)(e.deviceName),1),(0,r.Lk)("div",null,[(0,r.Lk)("button",{onClick:t=>a.send(e.id),class:"h5-button h5-button-blue",style:{"font-size":"12px",height:"28px"}},"Send",8,ne)])]))),256))])])]),_:1,__:[3]})}var ie={name:"msg",data(){return{content:"",clientArray:[]}},mounted(){this.refreshDevices(!1)},methods:{refreshDevices(e){plus.http.get({url:Api.push_client_list,cfg:{mask:e},callback:e=>{this.clientArray=e.clientArray}})},send(e){this.content?plus.http.post({url:Api.tincat_app_sendContent,param:{clientId:e,content:this.content},callback:e=>{}}):plus.toast("content is empty")}}};const re=(0,k.A)(ie,[["render",oe]]);var se=re;function le(e,t,n,o,i,s){const l=(0,r.g2)("Activity");return(0,r.uX)(),(0,r.Wv)(l,null,{default:(0,r.k6)(()=>t[0]||(t[0]=[(0,r.Lk)("div",{style:{"text-align":"center"}},[(0,r.Lk)("div",{style:{"font-weight":"bold",padding:"64px 0px 32px 0px","font-size":"16px"}},"Signin"),(0,r.Lk)("div",{id:"qrcode",style:{display:"flex","justify-content":"center",height:"170px"}}),(0,r.Lk)("div",{style:{"margin-top":"32px"}},"Scan the QR code with Tincat App")],-1)])),_:1,__:[0]})}var ae={name:"signin",data(){return{}},mounted(){window.PushService.stop(),plus.http.get({url:Api.user_token_create,param:{app:"tincat",sessionType:"web"},callback:e=>{$("#qrcode").qrcode({width:170,height:170,text:"tincat://chrome/signin?token="+e.token}),this.checkToken(e.token)}})},unmounted(){clearInterval(this.timer)},methods:{checkToken(e){this.timer=setInterval(()=>{plus.http.get({url:Api.user_token_check+"/"+e,cfg:{mask:!1},callback:e=>{e.user&&(clearInterval(this.timer),e.user.deviceType="web",plus.user.setUserInfo(e.user,()=>{window.PushService.start(),plus.browser.open("/home")}))}})},3e3)}}};const pe=(0,k.A)(ae,[["render",le]]);var ce=pe;const de=[{path:"/bookmark",name:"bookmark",component:m},{path:"/home",name:"home",component:_},{path:"/live",name:"live",component:N},{path:"/msg",name:"msg",component:se},{path:"/signin",name:"signin",component:ce}],ue=(0,i.aE)({history:(0,i.Bt)(),routes:de});var he=ue;function fe(e,t,n,o,i,s){const l=(0,r.g2)("router-view");return(0,r.uX)(),(0,r.Wv)(l,null,{default:(0,r.k6)(({Component:e})=>[((0,r.uX)(),(0,r.Wv)(r.PR,{max:"32",include:i.includeList},[((0,r.uX)(),(0,r.Wv)((0,r.$y)(e)))],1032,["include"]))]),_:1})}var ge={data(){return{includeList:[],clearPage:["signin","home","bookmark","live","msg"]}},watch:{$route(e,t){console.log("从"+t.path+"到"+e.path+", isOpen="+plus.browser.isOpen);for(var n=e.name,o=0;o<this.clearPage.length;o++)if(n===this.clearPage[o]){this.includeList=[];break}plus.browser.isOpen?(setTimeout(()=>{plus.browser.isOpen=!1},500),this.includeList.push(e.name)):this.includeList.pop(),console.log("缓存:\n"+JSON.stringify(this.includeList,null,3))}}};const ke=(0,k.A)(ge,[["render",fe]]);var ve=ke;function me(e,t,n,o,i,s){return(0,r.uX)(),(0,r.CE)("div",null,[(0,r.RG)(e.$slots,"default")])}var ye={props:{background:{type:String,default:"#ffffff"}},created:function(){document.body.style.backgroundColor=this.background},activated:function(){document.body.style.backgroundColor=this.background}};const xe=(0,k.A)(ye,[["render",me]]);var be=xe,we="product";"product"===we&&(console.log=function(){}),window.Router=he,plus.http.onUnSigninListener=function(){plus.browser.open("/signin")},window.PushService={socket:null,start(){var e=this;console.log("开始启动推送服务"),this.socket?console.log("推送服务正在运行"):plus.user.getUserInfo(function(t){if(t){var n="www.netskyx.com",o="wss://"+n+"/ws/signin/v1?app=tincat&sid=${sid}&systemType=web&deviceName=${deviceName}";o=o.replace("${sid}",t.sid),o=o.replace("${deviceName}",encodeURIComponent("Chrome "+navigator.platform)),e.socket=new WebSocket(o),e.socket.onopen=function(){console.log("socket opened"),e.pushClientHeartbeat=setInterval(function(){e.socket&&(e.socket.send("1"),console.log("发送心跳包"))},29e3)},e.socket.onmessage=function(t){console.log("收到推送消息: "+t.data),e._handleMessage(t.data)},e.socket.onclose=function(t){console.log("推送服务停止运行"+t),clearInterval(e.pushClientHeartbeat),e.pushClientHeartbeat=null,e.socket=null,setTimeout(function(){e.start()},5e3)},e.socket.onerror=function(e){console.log(e)},console.log("推送服务开始运行")}else console.log("用户未登录，推送服务结束启动")})},stop(){this.socket&&(console.log("推送服务开始停止"),this.socket.close())},_handleMessage(e){var t=JSON.parse(e),n=t.extral.action,o=t.extral.actionData;"/push/content"!==n?"/push/video"!==n||window.open("player/index.html?url="+encodeURIComponent(o)):0===o.indexOf("http://")||0===o.indexOf("https://")?window.open(o):plus.storage.set("PushMessage",o,function(){window.open("text/index.html")})}},window.signout=()=>{confirm("Confirm to signout?")&&plus.user.setUserInfo(null,()=>{window.PushService.stop(),plus.browser.open("/signin")})};var Le=(0,o.Ef)(ve);Le.config.globalProperties.back=function(){history.back()},Le.component("Activity",be),Le.use(he),Le.mount("#app"),plus.user.getUserInfo(function(e){e?document.querySelector("#name").innerHTML="Hello "+e.name:plus.browser.open("/signin")}),window.PushService.start()}},t={};function n(o){var i=t[o];if(void 0!==i)return i.exports;var r=t[o]={exports:{}};return e[o].call(r.exports,r,r.exports,n),r.exports}n.m=e,function(){var e=[];n.O=function(t,o,i,r){if(!o){var s=1/0;for(c=0;c<e.length;c++){o=e[c][0],i=e[c][1],r=e[c][2];for(var l=!0,a=0;a<o.length;a++)(!1&r||s>=r)&&Object.keys(n.O).every(function(e){return n.O[e](o[a])})?o.splice(a--,1):(l=!1,r<s&&(s=r));if(l){e.splice(c--,1);var p=i();void 0!==p&&(t=p)}}return t}r=r||0;for(var c=e.length;c>0&&e[c-1][2]>r;c--)e[c]=e[c-1];e[c]=[o,i,r]}}(),function(){n.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return n.d(t,{a:t}),t}}(),function(){n.d=function(e,t){for(var o in t)n.o(t,o)&&!n.o(e,o)&&Object.defineProperty(e,o,{enumerable:!0,get:t[o]})}}(),function(){n.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){n.p=""}(),function(){var e={524:0};n.O.j=function(t){return 0===e[t]};var t=function(t,o){var i,r,s=o[0],l=o[1],a=o[2],p=0;if(s.some(function(t){return 0!==e[t]})){for(i in l)n.o(l,i)&&(n.m[i]=l[i]);if(a)var c=a(n)}for(t&&t(o);p<s.length;p++)r=s[p],n.o(e,r)&&e[r]&&e[r][0](),e[r]=0;return n.O(c)},o=self["webpackChunktincat"]=self["webpackChunktincat"]||[];o.forEach(t.bind(null,0)),o.push=t.bind(null,o.push.bind(o))}();var o=n.O(void 0,[504],function(){return n(5634)});o=n.O(o)})();
//# sourceMappingURL=app.e32bd7a9.js.map